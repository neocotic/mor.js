<!DOCTYPE html>  <html> <head>   <title>mor.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               mor.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><a href="http://neocotic.com/mor.js">mor.js</a> 1.0.2 <br />
(c) 2011 Alasdair Mercer <br />
Freely distributable under the MIT license. <br />
For all details and documentation: <br />
<a href="http://neocotic.com/mor.js">http://neocotic.com/mor.js</a></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">root</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Private constants</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Default mode used if not specified or found.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">DEFAULT_MODE</span> <span class="o">=</span> <span class="s1">&#39;classic&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Pattern placeholder for longer marks.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">LONG</span>         <span class="o">=</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Pattern placeholder for shor marks.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">SHORT</span>        <span class="o">=</span> <span class="s1">&#39;S&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>Private variables</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Map of Morse code patterns to supported characters. <br />
This is a multi-dimensional array and should be treated as such.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">chars</span>         <span class="o">=</span> <span class="p">[</span>
    <span class="cm">/* Char    | Pattern                          */</span>
    <span class="cm">/* Letters                                    */</span>
      <span class="p">[</span><span class="s1">&#39;\u0041&#39;</span><span class="p">,</span> <span class="s1">&#39;SL&#39;</span>     <span class="p">],</span> <span class="cm">/* A                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0042&#39;</span><span class="p">,</span> <span class="s1">&#39;LSSS&#39;</span>   <span class="p">],</span> <span class="cm">/* B                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0043&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLS&#39;</span>   <span class="p">],</span> <span class="cm">/* C                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0044&#39;</span><span class="p">,</span> <span class="s1">&#39;LSS&#39;</span>    <span class="p">],</span> <span class="cm">/* D                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0045&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span>      <span class="p">],</span> <span class="cm">/* E                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0046&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLS&#39;</span>   <span class="p">],</span> <span class="cm">/* F                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0047&#39;</span><span class="p">,</span> <span class="s1">&#39;LLS&#39;</span>    <span class="p">],</span> <span class="cm">/* G                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0048&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSS&#39;</span>   <span class="p">],</span> <span class="cm">/* H                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0049&#39;</span><span class="p">,</span> <span class="s1">&#39;SS&#39;</span>     <span class="p">],</span> <span class="cm">/* I                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u004A&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLL&#39;</span>   <span class="p">],</span> <span class="cm">/* J                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u004B&#39;</span><span class="p">,</span> <span class="s1">&#39;LSL&#39;</span>    <span class="p">],</span> <span class="cm">/* K                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u004C&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSS&#39;</span>   <span class="p">],</span> <span class="cm">/* L                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u004D&#39;</span><span class="p">,</span> <span class="s1">&#39;LL&#39;</span>     <span class="p">],</span> <span class="cm">/* M                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u004E&#39;</span><span class="p">,</span> <span class="s1">&#39;LS&#39;</span>     <span class="p">],</span> <span class="cm">/* N                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u004F&#39;</span><span class="p">,</span> <span class="s1">&#39;LLL&#39;</span>    <span class="p">],</span> <span class="cm">/* O                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0050&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLS&#39;</span>   <span class="p">],</span> <span class="cm">/* P                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0051&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSL&#39;</span>   <span class="p">],</span> <span class="cm">/* Q                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0052&#39;</span><span class="p">,</span> <span class="s1">&#39;SLS&#39;</span>    <span class="p">],</span> <span class="cm">/* R                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0053&#39;</span><span class="p">,</span> <span class="s1">&#39;SSS&#39;</span>    <span class="p">],</span> <span class="cm">/* S                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0054&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span>      <span class="p">],</span> <span class="cm">/* T                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0055&#39;</span><span class="p">,</span> <span class="s1">&#39;SSL&#39;</span>    <span class="p">],</span> <span class="cm">/* U                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0056&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSL&#39;</span>   <span class="p">],</span> <span class="cm">/* V                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0057&#39;</span><span class="p">,</span> <span class="s1">&#39;SLL&#39;</span>    <span class="p">],</span> <span class="cm">/* W                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0058&#39;</span><span class="p">,</span> <span class="s1">&#39;LSSL&#39;</span>   <span class="p">],</span> <span class="cm">/* X                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0059&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLL&#39;</span>   <span class="p">],</span> <span class="cm">/* Y                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u005A&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSS&#39;</span>   <span class="p">],</span> <span class="cm">/* Z                 */</span>
    <span class="cm">/* Numbers                                    */</span>
      <span class="p">[</span><span class="s1">&#39;\u0030&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLLL&#39;</span>  <span class="p">],</span> <span class="cm">/* 0                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0031&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLLL&#39;</span>  <span class="p">],</span> <span class="cm">/* 1                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0032&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLLL&#39;</span>  <span class="p">],</span> <span class="cm">/* 2                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0033&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSLL&#39;</span>  <span class="p">],</span> <span class="cm">/* 3                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0034&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSSL&#39;</span>  <span class="p">],</span> <span class="cm">/* 4                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0035&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSSS&#39;</span>  <span class="p">],</span> <span class="cm">/* 5                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0036&#39;</span><span class="p">,</span> <span class="s1">&#39;LSSSS&#39;</span>  <span class="p">],</span> <span class="cm">/* 6                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0037&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSSS&#39;</span>  <span class="p">],</span> <span class="cm">/* 7                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0038&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* 8                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0039&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLLS&#39;</span>  <span class="p">],</span> <span class="cm">/* 9                 */</span>
    <span class="cm">/* Punctuation                                */</span>
      <span class="p">[</span><span class="s1">&#39;\u002E&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSLSL&#39;</span> <span class="p">],</span> <span class="cm">/* Full stop         */</span>
      <span class="p">[</span><span class="s1">&#39;\u002C&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSSLL&#39;</span> <span class="p">],</span> <span class="cm">/* Comma             */</span>
      <span class="p">[</span><span class="s1">&#39;\u003F&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLLSS&#39;</span> <span class="p">],</span> <span class="cm">/* Question mark     */</span>
      <span class="p">[</span><span class="s1">&#39;\u0027&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLLLS&#39;</span> <span class="p">],</span> <span class="cm">/* Apostrophe        */</span>
      <span class="p">[</span><span class="s1">&#39;\u0021&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLSLL&#39;</span> <span class="p">],</span> <span class="cm">/* Exclamation mark  */</span>
      <span class="p">[</span><span class="s1">&#39;\u002F&#39;</span><span class="p">,</span> <span class="s1">&#39;LSSLS&#39;</span>  <span class="p">],</span> <span class="cm">/* Slash             */</span>
      <span class="p">[</span><span class="s1">&#39;\u0028&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLLS&#39;</span>  <span class="p">],</span> <span class="cm">/* Left parenthesis  */</span>
      <span class="p">[</span><span class="s1">&#39;\u0029&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLLSL&#39;</span> <span class="p">],</span> <span class="cm">/* Right parenthesis */</span>
      <span class="p">[</span><span class="s1">&#39;\u0026&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSSS&#39;</span>  <span class="p">],</span> <span class="cm">/* Ampersand         */</span>
      <span class="p">[</span><span class="s1">&#39;\u003A&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLSSS&#39;</span> <span class="p">],</span> <span class="cm">/* Colon             */</span>
      <span class="p">[</span><span class="s1">&#39;\u003B&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLSLS&#39;</span> <span class="p">],</span> <span class="cm">/* Semicolon         */</span>
      <span class="p">[</span><span class="s1">&#39;\u003D&#39;</span><span class="p">,</span> <span class="s1">&#39;LSSSL&#39;</span>  <span class="p">],</span> <span class="cm">/* Equal sign        */</span>
      <span class="p">[</span><span class="s1">&#39;\u002B&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSLS&#39;</span>  <span class="p">],</span> <span class="cm">/* Plus sign         */</span>
      <span class="p">[</span><span class="s1">&#39;\u002D&#39;</span><span class="p">,</span> <span class="s1">&#39;LSSSSL&#39;</span> <span class="p">],</span> <span class="cm">/* Hyphen-minus      */</span>
      <span class="p">[</span><span class="s1">&#39;\u005F&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLLSL&#39;</span> <span class="p">],</span> <span class="cm">/* Low line          */</span>
      <span class="p">[</span><span class="s1">&#39;\u0022&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSSLS&#39;</span> <span class="p">],</span> <span class="cm">/* Quotation mark    */</span>
      <span class="p">[</span><span class="s1">&#39;\u0024&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSLSSL&#39;</span><span class="p">],</span> <span class="cm">/* Dollar sign       */</span>
      <span class="p">[</span><span class="s1">&#39;\u0040&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLSLS&#39;</span> <span class="p">],</span> <span class="cm">/* At sign           */</span>
    <span class="cm">/* Non-English extensions                     */</span>
      <span class="p">[</span><span class="s1">&#39;\u00C4&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSL&#39;</span>   <span class="p">],</span> <span class="cm">/* A with diaeresis  */</span>
      <span class="p">[</span><span class="s1">&#39;\u00C6&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSL&#39;</span>   <span class="p">],</span> <span class="cm">/* Ã†                 */</span>
      <span class="p">[</span><span class="s1">&#39;\u0104&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSL&#39;</span>   <span class="p">],</span> <span class="cm">/* A with ogonek     */</span>
      <span class="p">[</span><span class="s1">&#39;\u00C0&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLSL&#39;</span>  <span class="p">],</span> <span class="cm">/* A with grave      */</span>
      <span class="p">[</span><span class="s1">&#39;\u00C5&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLSL&#39;</span>  <span class="p">],</span> <span class="cm">/* A with ring above */</span>
      <span class="p">[</span><span class="s1">&#39;\u00C7&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* C with cedilla    */</span>
      <span class="p">[</span><span class="s1">&#39;\u0108&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* C with circumflex */</span>
      <span class="p">[</span><span class="s1">&#39;\u0106&#39;</span><span class="p">,</span> <span class="s1">&#39;LSLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* C with acute      */</span>
      <span class="p">[</span><span class="s1">&#39;\u0160&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLL&#39;</span>   <span class="p">],</span> <span class="cm">/* S with caron      */</span>
      <span class="p">[</span><span class="s1">&#39;\u00D0&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLLS&#39;</span>  <span class="p">],</span> <span class="cm">/* Eth               */</span>
      <span class="p">[</span><span class="s1">&#39;\u015A&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSLSSS&#39;</span><span class="p">],</span> <span class="cm">/* S with acute      */</span>
      <span class="p">[</span><span class="s1">&#39;\u00C8&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSSL&#39;</span>  <span class="p">],</span> <span class="cm">/* E with grave      */</span>
      <span class="p">[</span><span class="s1">&#39;\u0141&#39;</span><span class="p">,</span> <span class="s1">&#39;SLSSL&#39;</span>  <span class="p">],</span> <span class="cm">/* L with stroke     */</span>
      <span class="p">[</span><span class="s1">&#39;\u00C9&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* E with acute      */</span>
      <span class="p">[</span><span class="s1">&#39;\u0110&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* D with stroke     */</span>
      <span class="p">[</span><span class="s1">&#39;\u0118&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* E with ogonek     */</span>
      <span class="p">[</span><span class="s1">&#39;\u011C&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSLS&#39;</span>  <span class="p">],</span> <span class="cm">/* G with circumflex */</span>
      <span class="p">[</span><span class="s1">&#39;\u0124&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLL&#39;</span>   <span class="p">],</span> <span class="cm">/* H with circumflex */</span>
      <span class="p">[</span><span class="s1">&#39;\u0134&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLLS&#39;</span>  <span class="p">],</span> <span class="cm">/* J with circumflex */</span>
      <span class="p">[</span><span class="s1">&#39;\u0179&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSSLS&#39;</span> <span class="p">],</span> <span class="cm">/* Z with acute      */</span>
      <span class="p">[</span><span class="s1">&#39;\u00D1&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSLL&#39;</span>  <span class="p">],</span> <span class="cm">/* N with tilde      */</span>
      <span class="p">[</span><span class="s1">&#39;\u0143&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSLL&#39;</span>  <span class="p">],</span> <span class="cm">/* N with acute      */</span>
      <span class="p">[</span><span class="s1">&#39;\u00D6&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLS&#39;</span>   <span class="p">],</span> <span class="cm">/* O with diaeresis  */</span>
      <span class="p">[</span><span class="s1">&#39;\u00D8&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLS&#39;</span>   <span class="p">],</span> <span class="cm">/* O with stroke     */</span>
      <span class="p">[</span><span class="s1">&#39;\u00D3&#39;</span><span class="p">,</span> <span class="s1">&#39;LLLS&#39;</span>   <span class="p">],</span> <span class="cm">/* O with acute      */</span>
      <span class="p">[</span><span class="s1">&#39;\u015C&#39;</span><span class="p">,</span> <span class="s1">&#39;SSSLS&#39;</span>  <span class="p">],</span> <span class="cm">/* S with circumflex */</span>
      <span class="p">[</span><span class="s1">&#39;\u00DE&#39;</span><span class="p">,</span> <span class="s1">&#39;SLLSS&#39;</span>  <span class="p">],</span> <span class="cm">/* Thorn             */</span>
      <span class="p">[</span><span class="s1">&#39;\u00DC&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLL&#39;</span>   <span class="p">],</span> <span class="cm">/* U with diaeresis  */</span>
      <span class="p">[</span><span class="s1">&#39;\u016C&#39;</span><span class="p">,</span> <span class="s1">&#39;SSLL&#39;</span>   <span class="p">],</span> <span class="cm">/* U with breve      */</span>
      <span class="p">[</span><span class="s1">&#39;\u017B&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSSL&#39;</span>  <span class="p">]</span>  <span class="cm">/* Z with dot above  */</span>
    <span class="p">],</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Map of supported modes used to encode/decode messages. <br />
This is a multi-dimensional array and should be treated as such.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">modes</span>         <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Repeat a string the specified number of times.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">function</span> <span class="nx">repeat</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">ret</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">num</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">str</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Return the array of predefined modes.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">return</span> <span class="p">[</span>
      <span class="cm">/* Name               | Chars                                      */</span>
        <span class="p">[</span><span class="s1">&#39;classic&#39;</span><span class="p">,</span>          <span class="p">[</span><span class="s1">&#39;\u00B7&#39;</span><span class="p">,</span>       <span class="cm">/* Middle dot              */</span>
                              <span class="s1">&#39;\u002D&#39;</span><span class="p">,</span>       <span class="cm">/* Hyphen-minus            */</span>
                              <span class="s1">&#39;\u0020&#39;</span><span class="p">,</span>       <span class="cm">/* Space                   */</span>
                       <span class="nx">repeat</span><span class="p">(</span><span class="s1">&#39;\u0020&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>   <span class="cm">/* Space (x3)              */</span>
                       <span class="nx">repeat</span><span class="p">(</span><span class="s1">&#39;\u0020&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]],</span> <span class="cm">/* Space (x7)              */</span>
        <span class="p">[</span><span class="s1">&#39;classic-entities&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;&amp;middot;&#39;</span><span class="p">,</span>     <span class="cm">/* Middle dot              */</span>
                              <span class="s1">&#39;&amp;#45;&#39;</span><span class="p">,</span>        <span class="cm">/* Hyphen-minus            */</span>
                              <span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">,</span>       <span class="cm">/* Non-breaking space      */</span>
                       <span class="nx">repeat</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>   <span class="cm">/* Non-breaking space (x3) */</span>
                       <span class="nx">repeat</span><span class="p">(</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]],</span> <span class="cm">/* Non-breaking space (x7) */</span>
        <span class="p">[</span><span class="s1">&#39;digital&#39;</span><span class="p">,</span>          <span class="p">[</span><span class="s1">&#39;\u0031&#39;</span><span class="p">,</span>       <span class="cm">/* 1                       */</span>
                       <span class="nx">repeat</span><span class="p">(</span><span class="s1">&#39;\u0031&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>   <span class="cm">/* 1 (x3)                  */</span>
                              <span class="s1">&#39;\u0030&#39;</span><span class="p">,</span>       <span class="cm">/* 0                       */</span>
                       <span class="nx">repeat</span><span class="p">(</span><span class="s1">&#39;\u0030&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>   <span class="cm">/* 0 (x3)                  */</span>
                       <span class="nx">repeat</span><span class="p">(</span><span class="s1">&#39;\u0030&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]],</span> <span class="cm">/* 0 (x7)                  */</span>
        <span class="p">[</span><span class="s1">&#39;simple&#39;</span><span class="p">,</span>           <span class="p">[</span><span class="s1">&#39;\u0030&#39;</span><span class="p">,</span>       <span class="cm">/* 0                       */</span>
                              <span class="s1">&#39;\u0031&#39;</span><span class="p">,</span>       <span class="cm">/* 1                       */</span>
                              <span class="s1">&#39;&#39;</span><span class="p">,</span>             <span class="cm">/* &lt;Empty&gt;                 */</span>
                              <span class="s1">&#39;\u002C&#39;</span><span class="p">,</span>       <span class="cm">/* Comma                   */</span>
                              <span class="s1">&#39;\u0020&#39;</span><span class="p">]]</span>      <span class="cm">/* Space                   */</span>
      <span class="p">];</span>
    <span class="p">}()),</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Save the previous value of the <code>morjs</code> variable.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">previousMorjs</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">morjs</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h2>Private functions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Return the character mapping that matches the query provided.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">function</span> <span class="nx">findChar</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p><code>query</code> is case-insensitive.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">query</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">chars</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">chars</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">index</span><span class="p">]</span> <span class="o">===</span> <span class="nx">query</span><span class="p">)</span> <span class="k">return</span> <span class="nx">chars</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Return the mode mapping that matches the name provided. <br />
If no name is specified, or no matching mode could be found, the
<code>DEFAULT_MODE</code> will be returned.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">function</span> <span class="nx">findMode</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p><code>name</code> is case-insensitive.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">modes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">modes</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">name</span><span class="p">)</span> <span class="k">return</span> <span class="nx">modes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">findMode</span><span class="p">(</span><span class="nx">DEFAULT_MODE</span><span class="p">);</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Parse a string by replacing any instances of the queries provided with
their corresponding replacement strings.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">function</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">query1</span><span class="p">,</span> <span class="nx">replacement1</span><span class="p">,</span> <span class="nx">query2</span><span class="p">,</span> <span class="nx">replacement2</span><span class="p">,</span> <span class="nx">spacer</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span>
      <span class="nx">hasSpacer</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">spacer</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
      <span class="nx">ret</span>       <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Insert spacer if provided and not first loop.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">hasSpacer</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">spacer</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Swap queries with their replacements.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">switch</span> <span class="p">(</span><span class="nx">str</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
      <span class="k">case</span> <span class="nx">query1</span><span class="o">:</span>
        <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">replacement1</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nx">query2</span><span class="o">:</span>
        <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">replacement2</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Prepare the string to simplify encoding/decoding. <br />
The return value is a multi-dimensional array and should be treated as
such.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">function</span> <span class="nx">prepare</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">wordSplitter</span><span class="p">,</span> <span class="nx">letterSplitter</span><span class="p">,</span> <span class="nx">charSplitter</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">str</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid value type: &#39;</span> <span class="o">+</span> <span class="k">typeof</span> <span class="nx">str</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span>
      <span class="nx">hasCharSplitter</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">charSplitter</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">,</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="nx">wordSplitter</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="nx">letterSplitter</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">hasCharSplitter</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="nx">charSplitter</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Safely handle cases where synchronization methodology may vary. <br />
In cases where a callback function was specified it should be used to pass
the return value of the function provided or any errors that were thrown
during the process. Either the return value of the callback function or
the error encountered will be returned here. <br />
Otherwise; errors will be thrown as normal and the return value of the
function will simply be returned. <br />
When the function provided is called the specified context will be
applied.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">function</span> <span class="nx">syncSafe</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">cb</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">||</span> <span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>All went OK, so handle result.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">cb</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">cb</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">ret</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Something went wrong, so bubble the error.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">cb</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">cb</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <h2>mor.js setup</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Build the publicly exposed API.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">morjs</span> <span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <h2>Constants</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Current version of <code>morjs</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">VERSION</span><span class="o">:</span> <span class="s1">&#39;1.0.2&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <h2>Main functions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Decode the message from Morse code to a human-readable message. <br />
The message will not be decoded correctly if the mode used to decode the
message is not the same as that used to encode it. <br />
If no mode is specified <code>DEFAULT_MODE</code> will be used. <br />
Optionally, a callback function can be provided which will be called
with the result as the second argument. If an error occurs it will be
passed as the first argument to this function, otherwise this argument
will be <code>null</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">decode</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">syncSafe</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="kd">var</span> 
          <span class="nx">mode</span>  <span class="o">=</span> <span class="nx">findMode</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">mode</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
          <span class="nx">ret</span>   <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">prepare</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Ensure message was prepared successfully.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Iterate over each word.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Insert space between each word.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Iterate over each character of word.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Reverse engineer pattern for character.</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="kd">var</span> <span class="nx">pattern</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">],</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">SHORT</span><span class="p">,</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">LONG</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Check if pattern is supported.</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="k">if</span> <span class="p">(</span><span class="nx">pattern</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Retrieve first character matching the pattern.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="kd">var</span> <span class="nx">ch</span> <span class="o">=</span> <span class="nx">findChar</span><span class="p">(</span><span class="nx">pattern</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Append character if it's supported.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span><span class="nx">ch</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">},</span> <span class="nx">callback</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Encode the message in to the Morse code. <br />
If no mode is specified <code>DEFAULT_MODE</code> will be used. <br />
Optionally, a callback function can be provided which will be called
with the result as the second argument. If an error occurs it will be
passed as the first argument to this function, otherwise this argument
will be <code>null</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">encode</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">syncSafe</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="kd">var</span>
          <span class="nx">mode</span>  <span class="o">=</span> <span class="nx">findMode</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">mode</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
          <span class="nx">ret</span>   <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">prepare</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="sr">/\s+/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Ensure message was prepared successfully.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Iterate over each word.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Insert medium gap between each word.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Iterate over each character of word</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Insert short gap between each letter.</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Retrieve first character matching the character.</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="kd">var</span> <span class="nx">ch</span> <span class="o">=</span> <span class="nx">findChar</span><span class="p">(</span><span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Parse pattern for character if it's supported.</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="k">if</span> <span class="p">(</span><span class="nx">ch</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">SHORT</span><span class="p">,</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">LONG</span><span class="p">,</span> <span class="nx">mode</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                  <span class="nx">mode</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">},</span> <span class="nx">callback</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <h2>Customization functions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Map a new pattern to the character provided. <br />
If a mapping already exists for the specified character, that mapping
will be modified. <br />
Optionally, a callback function can be provided which will be called
when the character has been defined. If an error occurs it will be
passed as the first argument to this function, otherwise this argument
will be <code>null</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">defineChar</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">character</span><span class="p">,</span> <span class="nx">pattern</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">syncSafe</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Type-check arguments provided.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">character</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid character type: &#39;</span> <span class="o">+</span> <span class="k">typeof</span> <span class="nx">character</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">pattern</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid pattern type: &#39;</span> <span class="o">+</span> <span class="k">typeof</span> <span class="nx">pattern</span><span class="p">);</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p><code>character</code> must be singular.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">character</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Invalid character length: &#39;</span> <span class="o">+</span> <span class="nx">character</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">ucPattern</span> <span class="o">=</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">toUpperCase</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p><code>pattern</code> must only contain <code>S</code> &amp; <code>L</code> characters and must contain at
least one of either.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="sr">/^[SL]+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">ucPattern</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Invalid pattern: &#39;</span> <span class="o">+</span> <span class="nx">pattern</span><span class="p">);</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Update existing character mapping or create new one.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">character</span> <span class="o">=</span> <span class="nx">character</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">existingChar</span> <span class="o">=</span> <span class="nx">findChar</span><span class="p">(</span><span class="nx">character</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">existingChar</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">existingChar</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ucPattern</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">chars</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">character</span><span class="p">,</span> <span class="nx">ucPattern</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="nx">callback</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Map new characters to the mode provided. <br />
If a mode already exists for the specified name, that mode's character
mapping will be modified. <br />
The elements of <code>characters</code> should be specified in the following order;</p>

<ul>
<li>Short mark (dot)</li>
<li>Longer mark (dash)</li>
<li>Intra-character gap (between dots and dashes within a character)</li>
<li>Short gap (between letters)</li>
<li>Medium gap (between words)</li>
</ul>

<p>Optionally, a callback function can be provided which will be called
when the mode has been defined. If an error occurs it will be passed as
the first argument to this function, otherwise this argument will be
<code>null</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">defineMode</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">characters</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">syncSafe</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Type-check arguments provided.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid name type: &#39;</span> <span class="o">+</span> <span class="k">typeof</span> <span class="nx">name</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">characters</span> <span class="o">!==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid characters type: &#39;</span> <span class="o">+</span> <span class="k">typeof</span> <span class="nx">characters</span><span class="p">);</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p><code>characters</code> must contain all required character replacements.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">characters</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Invalid characters length: &#39;</span> <span class="o">+</span> <span class="nx">characters</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Iterate over each character in <code>characters</code>, validating each one.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">character</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">characters</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">character</span> <span class="o">=</span> <span class="nx">characters</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p><code>character</code> must be a string.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">character</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid character type at [&#39;</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s1">&#39;]: &#39;</span> <span class="o">+</span>
                <span class="k">typeof</span> <span class="nx">character</span><span class="p">);</span>
          <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p><code>character</code> cannot contain either <code>S</code> or <code>L</code> characters.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">character</span> <span class="o">=</span> <span class="nx">character</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">character</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">LONG</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Invalid character found at [&#39;</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s1">&#39;]: &#39;</span> <span class="o">+</span> <span class="nx">LONG</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">character</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">SHORT</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Invalid character found at [&#39;</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s1">&#39;]: &#39;</span> <span class="o">+</span>
                <span class="nx">SHORT</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Update existing mode mapping or create new one.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">existingMode</span> <span class="o">=</span> <span class="nx">findMode</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">existingMode</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">existingMode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">characters</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">modes</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">name</span><span class="p">,</span> <span class="nx">characters</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="nx">callback</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <h2>Utility functions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Run mor.js in <em>noConflict</em> mode, returning the <code>morjs</code> variable to its
previous owner. <br />
Returns a reference to <code>morjs</code>. <br />
Optionally, a callback function can be provided which will be called
after the ownership has been restored. If an error occurs it will be
passed as the first argument to this function, otherwise this argument
will be <code>null</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">noConflict</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">syncSafe</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">root</span><span class="p">.</span><span class="nx">morjs</span> <span class="o">=</span> <span class="nx">previousMorjs</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span> <span class="nx">callback</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>

  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>Export <code>morjs</code> for NodeJS and CommonJS.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">module</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">morjs</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">exports</span><span class="p">.</span><span class="nx">morjs</span> <span class="o">=</span> <span class="nx">morjs</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">define</span><span class="p">(</span><span class="s1">&#39;morjs&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">morjs</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">root</span><span class="p">.</span><span class="nx">morjs</span> <span class="o">=</span> <span class="nx">morjs</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}(</span><span class="k">this</span><span class="p">));</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 