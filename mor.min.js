/*!
 * mor.js v1.0.2
 * http://forchoon.com/projects/javascript/mor-js/
 *
 * Copyright 2011, Alasdair Mercer
 * Licensed under the GPL Version 3 license.
 */
(function(a){function m(a,b){var c=typeof b==="function";try{var d=a();if(c){return b(null,d)}else{return d}}catch(e){if(c){return b(e)}else{throw e}}}function l(a,b){var c="";for(var d=0;d<b;d++){c+=a}return c}function k(a,b,c,d){if(typeof a!=="string"){throw new TypeError("Invalid value type: "+typeof a)}var e=typeof d!=="undefined",f=a.trim().split(b);for(var g=0;g<f.length;g++){f[g]=f[g].split(c);if(e){for(var h=0;h<f[g].length;h++){f[g][h]=f[g][h].split(d).join("")}}}return f}function j(a,b,c,d,e,f){var g=typeof f==="string",h="";for(var i=0;i<a.length;i++){if(g&&i>0){h+=f}switch(a[i]){case b:h+=c;break;case d:h+=e;break}}return h}function i(a){if(typeof a==="string"){a=a.toLowerCase();for(var b=0;b<e.length;b++){if(e[b][0]===a){return e[b]}}}return i(c)}function h(a,c){a=a.toUpperCase();for(var d=0;d<b.length;d++){if(b[d][c]===a){return b[d]}}}var b=[["A","SL"],["B","LSSS"],["C","LSLS"],["D","LSS"],["E","S"],["F","SSLS"],["G","LLS"],["H","SSSS"],["I","SS"],["J","SLLL"],["K","LSL"],["L","SLSS"],["M","LL"],["N","LS"],["O","LLL"],["P","SLLS"],["Q","LLSL"],["R","SLS"],["S","SSS"],["T","L"],["U","SSL"],["V","SSSL"],["W","SLL"],["X","LSSL"],["Y","LSLL"],["Z","LLSS"],["0","LLLLL"],["1","SLLLL"],["2","SSLLL"],["3","SSSLL"],["4","SSSSL"],["5","SSSSS"],["6","LSSSS"],["7","LLSSS"],["8","LLLSS"],["9","LLLLS"],[".","SLSLSL"],[",","LLSSLL"],["?","SSLLSS"],["'","SLLLLS"],["!","LSLSLL"],["/","LSSLS"],["(","LSLLS"],[")","LSLLSL"],["&","SLSSS"],[":","LLLSSS"],[";","LSLSLS"],["=","LSSSL"],["+","SLSLS"],["-","LSSSSL"],["_","SSLLSL"],['"',"SLSSLS"],["$","SSSLSSL"],["@","SLLSLS"],["Ä","SLSL"],["Æ","SLSL"],["Ą","SLSL"],["À","SLLSL"],["Å","SLLSL"],["Ç","LSLSS"],["Ĉ","LSLSS"],["Ć","LSLSS"],["Š","LLLL"],["Ð","SSLLS"],["Ś","SSSLSSS"],["È","SLSSL"],["Ł","SLSSL"],["É","SSLSS"],["Đ","SSLSS"],["Ę","SSLSS"],["Ĝ","LLSLS"],["Ĥ","LLLL"],["Ĵ","SLLLS"],["Ź","LLSSLS"],["Ñ","LLSLL"],["Ń","LLSLL"],["Ö","LLLS"],["Ø","LLLS"],["Ó","LLLS"],["Ŝ","SSSLS"],["Þ","SLLSS"],["Ü","SSLL"],["Ŭ","SSLL"],["Ż","LLSSL"]],c="classic",d="L",e=[],f=a.morjs,g="S";e.push(["classic",["·","-"," ",l(" ",3),l(" ",7)]]);e.push(["classic-entities",["·","&#45;"," ",l(" ",3),l(" ",7)]]);e.push(["digital",["1",l("1",3),"0",l("0",3),l("0",7)]]);e.push(["simple",["0","1","",","," "]]);var n={decode:function(a,b){return m(function(){a=a||{};var b=i(a.mode)[1],c="",e=k(a.message||"",b[4],b[3],b[2]);if(e.length){for(var f=0;f<e.length;f++){if(f>0){c+=" "}for(var l=0;l<e[f].length;l++){var m=j(e[f][l],b[0],g,b[1],d);if(m){var n=h(m,1);if(n){c+=n[0]}}}}}return c},b)},defineChar:function(a,c,d){return m(function(){if(typeof a!=="string"){throw new TypeError("Invalid character type: "+typeof a)}else if(typeof c!=="string"){throw new TypeError("Invalid pattern type: "+typeof c)}if(a.length>1){throw new Error("Invalid character length: "+a.length)}var d=a.toUpperCase(),e=c.trim().toUpperCase();if(!/^[SL]+$/.test(e)){throw new Error("Invalid pattern: "+c)}var f=h(d,0);if(f){f[1]=e}else{b.push([d,e])}},d)},defineMode:function(a,b,c){return m(function(){if(typeof a!=="string"){throw new TypeError("Invalid name type: "+typeof a)}if(typeof b!=="object"){throw new TypeError("Invalid characters type: "+typeof b)}if(b.length!==5){throw new Error("Invalid characters length: "+b.length)}var c=a.toLowerCase(),f="";for(var h=0;h<b.length;h++){if(typeof b[h]!=="string"){throw new TypeError("Invalid character type at ["+h+"]: "+typeof b[h])}f=b[h].toUpperCase();if(f.indexOf(d)!==-1){throw new Error("Invalid character found at ["+h+"]: "+d)}else if(f.indexOf(g)!==-1){throw new Error("Invalid character found at ["+h+"]: "+g)}}var j=i(c);if(j){j[1]=b}else{e.push([c,b])}},c)},encode:function(a,b){return m(function(){a=a||{};var b=i(a.mode)[1],c="",e=k(a.message||"",/\s+/,"");if(e.length){for(var f=0;f<e.length;f++){if(f>0){c+=b[4]}for(var l=0;l<e[f].length;l++){if(l>0){c+=b[3]}var m=h(e[f][l],0);if(m){c+=j(m[1],g,b[0],d,b[1],b[2])}}}}return c},b)},noConflict:function(){a.morjs=f;return this},VERSION:"1.0.2"};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=n}exports.morjs=n}else if(typeof define==="function"&&define.amd){define("morjs",function(){return n})}else{a.morjs=n}})(this)